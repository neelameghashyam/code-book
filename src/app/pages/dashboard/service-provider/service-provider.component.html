<div class="container mx-auto bg-white transition-colors duration-300 font-sans">
  <mat-card class="bg-white font-sans border-0 shadow-none p-4">
    <mat-card-header class="p-4">
      <button (click)="onCancel()" class="absolute top-0 right-0 flex justify-center items-center p-2 rounded-full hover:bg-gray-100" aria-label="Close">
        <mat-icon>close</mat-icon>
      </button>
      <mat-card-title class="flex justify-between items-center relative">
        <h2 class="text-2xl font-bold text-gray-900">Add Service Provider</h2>
      </mat-card-title>
      <mat-card-subtitle class="text-gray-900 mt-1 mb-4 text-sm">
        <p>Fill in the fields below to add a new service provider.</p>
      </mat-card-subtitle>
    </mat-card-header>
    <mat-card-content class="p-4 pt-0">
      <form [formGroup]="providerForm" (ngSubmit)="saveProvider()" class="font-sans">
        <div class="flex flex-col md:flex-row gap-4">
          <!-- Left Column -->
          <div class="flex-1 flex flex-col gap-4">
            <!-- Country -->
            <div class="flex flex-col">
              <label for="country" class="text-sm font-bold text-gray-900">Country</label>
              <select
                id="country"
                formControlName="country"
                class="p-2 border rounded text-sm w-full focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-800 dark:border-gray-600 dark:text-gray-100 h-10"
                [ngClass]="{
                  'border-[#D7373C]': providerForm.get('country')?.invalid && providerForm.get('country')?.touched
                }"
                aria-required="true"
              >
                <option value="" disabled>Select country</option>
                <option *ngFor="let country of countries" [value]="country" class="font-sans">
                  {{ country }}
                </option>
              </select>
              <div class="min-h-6 mt-1">
                <small
                  *ngIf="providerForm.get('country')?.invalid && providerForm.get('country')?.touched"
                  class="text-xs text-[#D7373C] font-sans"
                >
                  Country is required
                </small>
              </div>
            </div>

            <!-- Address Line 1 -->
            <div class="flex flex-col">
              <label for="addressLine1" class="text-sm font-bold text-gray-900 font-sans">Address line 1</label>
              <input
                id="addressLine1"
                type="text"
                formControlName="addressLine1"
                placeholder="First line of address"
                class="p-2 border border-gray-300 rounded text-sm w-full bg-white text-gray-900 h-10 font-sans"
                [ngClass]="{
                  'border-[#D7373C]': providerForm.get('addressLine1')?.invalid && providerForm.get('addressLine1')?.touched
                }"
                aria-required="true"
              />
              <div class="min-h-6 mt-1">
                <small
                  *ngIf="providerForm.get('addressLine1')?.invalid && providerForm.get('addressLine1')?.touched"
                  class="text-xs text-[#D7373C] font-sans"
                >
                  Address line 1 is required
                </small>
              </div>
            </div>

            <!-- Address Line 3 -->
            <div class="flex flex-col">
              <label for="addressLine3" class="text-sm font-bold text-gray-900 font-sans">Address line 3 (optional)</label>
              <input
                id="addressLine3"
                type="text"
                formControlName="addressLine3"
                placeholder="Third line of address"
                class="p-2 border border-gray-300 rounded text-sm w-full bg-white text-gray-900 h-10 font-sans"
              />
              <div class="min-h-6 mt-1"></div>
            </div>

            <!-- State / Province -->
            <div class="flex flex-col">
              <label for="state" class="text-sm font-bold text-gray-900 font-sans">State / Province (optional)</label>
              <input
                id="state"
                type="text"
                formControlName="state"
                placeholder="Enter state or province"
                class="p-2 border border-gray-300 rounded text-sm w-full bg-white text-gray-900 h-10 font-sans"
                [ngClass]="{
                  'border-[#D7373C]': providerForm.get('state')?.invalid && providerForm.get('state')?.touched
                }"
              />
              <div class="min-h-6 mt-1">
                <small
                  *ngIf="providerForm.get('state')?.invalid && providerForm.get('state')?.touched"
                  class="text-xs text-[#D7373C] font-sans"
                >
                  State code must be 1 to 10 alphanumeric characters
                </small>
              </div>
            </div>
          </div>

          <!-- Right Column -->
          <div class="flex-1 flex flex-col gap-4">
            <!-- Service Provider Name -->
            <div class="flex flex-col">
              <label for="spName" class="text-sm font-bold text-gray-900 font-sans">Service Provider | SP Name</label>
              <input
                id="spName"
                type="text"
                formControlName="spName"
                placeholder="Enter Service Provider name"
                class="p-2 border border-gray-300 rounded text-sm w-full bg-white text-gray-900 h-10 font-sans"
                [ngClass]="{
                  'border-[#D7373C]': providerForm.get('spName')?.invalid && providerForm.get('spName')?.touched
                }"
                aria-required="true"
              />
              <div class="min-h-6 mt-1">
                <small
                  *ngIf="providerForm.get('spName')?.invalid && providerForm.get('spName')?.touched"
                  class="text-xs text-[#D7373C] font-sans"
                >
                  Service Provider name is required and must be at least 3 characters
                </small>
              </div>
            </div>

            <!-- Address Line 2 -->
            <div class="flex flex-col">
              <label for="addressLine2" class="text-sm font-bold text-gray-900 font-sans">Address line 2 (optional)</label>
              <input
                id="addressLine2"
                type="text"
                formControlName="addressLine2"
                placeholder="Second line of address"
                class="p-2 border border-gray-300 rounded text-sm w-full bg-white text-gray-900 h-10 font-sans"
              />
              <div class="min-h-6 mt-1"></div>
            </div>

            <!-- City / Town -->
            <div class="flex flex-col">
              <label for="city" class="text-sm font-bold text-gray-900 font-sans">City / Town</label>
              <input
                id="city"
                type="text"
                formControlName="city"
                placeholder="Enter city / town"
                class="p-2 border border-gray-300 rounded text-sm w-full bg-white text-gray-900 h-10 font-sans"
                [ngClass]="{
                  'border-[#D7373C]': providerForm.get('city')?.invalid && providerForm.get('city')?.touched
                }"
                aria-required="true"
              />
              <div class="min-h-6 mt-1">
                <small
                  *ngIf="providerForm.get('city')?.invalid && providerForm.get('city')?.touched"
                  class="text-xs text-[#D7373C] font-sans"
                >
                  City is required
                </small>
              </div>
            </div>

            <!-- Postal Code / Zip Code -->
            <div class="flex flex-col">
              <label for="postalCode" class="text-sm font-bold text-gray-900 font-sans">Postal code / Zip code</label>
              <input
                id="postalCode"
                type="text"
                formControlName="postalCode"
                placeholder="Enter code"
                class="p-2 border border-gray-300 rounded text-sm w-full bg-white text-gray-900 h-10 font-sans"
                [ngClass]="{
                  'border-[#D7373C]': providerForm.get('postalCode')?.invalid && providerForm.get('postalCode')?.touched
                }"
                aria-required="true"
              />
              <div class="min-h-6 mt-1">
                <small
                  *ngIf="providerForm.get('postalCode')?.invalid && providerForm.get('postalCode')?.touched"
                  class="text-xs text-[#D7373C] font-sans"
                >
                  Postal code is required and must be at least 3 characters
                </small>
              </div>
            </div>
          </div>
        </div>
      </form>
    </mat-card-content>
    <div class="flex flex-col sm:flex-row gap-3 p-4">
      <button
        type="submit"
        class="bg-[#CF4500] text-white px-4 py-2 rounded-full text-sm font-medium hover:bg-[#B53C00] focus:ring-2 focus:ring-[#CF4500] w-full sm:w-auto font-sans uppercase"
        [attr.aria-label]="providerForm.get('id')?.value ? 'Update service provider' : 'Add service provider'"
        (click)="saveProvider()"
      >
        {{ providerForm.get('id')?.value ? 'UPDATE SERVICE PROVIDER' : 'ADD SERVICE PROVIDER' }}
      </button>
      <button
        type="button"
        class="bg-[#CF4500] text-white px-4 py-2 rounded-full text-sm font-medium hover:bg-[#B53C00] focus:ring-2 focus:ring-[#CF4500] w-full sm:w-auto font-sans uppercase"
        (click)="onCancel()"
        aria-label="Cancel form"
      >
        Cancel
      </button>
    </div>
  </mat-card>
</div>